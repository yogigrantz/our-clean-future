@inject IConfiguration _configuration;
@inject IJSRuntime _jsRuntime;

<MudNavMenu>
    <MudNavLink Href="" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">Home</MudNavLink>
    <MudNavGroup Icon="@Icons.Material.Filled.AreaChart" Title="Areas">
        <MudNavLink Href="/areas/transportation" Match="NavLinkMatch.All">Transportation</MudNavLink>
        <MudNavLink Href="/areas/homes-and-buildings" Match="NavLinkMatch.All">Homes and buildings</MudNavLink>
        <MudNavLink Href="/areas/energy-production" Match="NavLinkMatch.All">Energy production</MudNavLink>
        <MudNavLink Href="/areas/people-and-the-environment" Match="NavLinkMatch.All">People and the environment</MudNavLink>
        <MudNavLink Href="/areas/communities" Match="NavLinkMatch.All">Communities</MudNavLink>
        <MudNavLink Href="/areas/innovation" Match="NavLinkMatch.All">Innovation</MudNavLink>
        <MudNavLink Href="/areas/leadership" Match="NavLinkMatch.All">Leadership</MudNavLink>
    </MudNavGroup>
    <MudNavLink Href="/actions" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.DirectionsRun">Actions</MudNavLink>
    <MudNavLink Href="/indicators" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.List">Indicators</MudNavLink>
    <AuthorizeView Roles="Administrator, 1">
        <MudNavGroup Icon="@Icons.Material.Filled.Settings" Title="Administration">
            <MudNavLink Href="/admin/leads/branches" Icon="@Icons.Material.Filled.BusinessCenter" IconColor="Color.Info">Leads</MudNavLink>
            <MudNavLink Href="/admin/authorizations" Icon="@Icons.Material.Filled.People" IconColor="Color.Secondary">User Authorizations</MudNavLink>
            <MudNavLink Href="/admin/units" Icon="@Icons.Material.Filled.Architecture" IconColor="Color.Tertiary">Units Of Measurement</MudNavLink>
        </MudNavGroup>
    </AuthorizeView>
    <MudNavLink OnClick="OpenDashboardInNewTab" Icon="@Icons.Material.Filled.Insights">Dashboard</MudNavLink>
</MudNavMenu>

@code {

    private async Task OpenDashboardInNewTab()
    {
        await _jsRuntime.InvokeAsync<object>("open", CancellationToken.None, _configuration["PowerBI:EmbedUrl"], "_blank");
    }

}
